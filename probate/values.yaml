tags:
  ccd-enabled: true
  ccd-idam-pr: true
  ccd-elasticsearch: true
  rpe-feature-toggle-api-pod: false
  postgresql-pod: false
  blobstorage: false
  idam-pr: true
  rpe-feature-toggle-pa-frontend: false
  idam-pr-pa-frontend: false


#######################################
##### Probate - Frontend
#######################################
probate-frontend:
  nodejs:
    # ingressHost: '{{ .Values.global.probateFrontend }}'
    ingressHost: "probate-ccd.demo.platform.hmcts.net"
    image: hmctspublic.azurecr.io/probate/frontend:aat-dea6770e
    releaseNameOverride: "frontend-chart-probate"
    environment:
      FEATURE_TOGGLES_API_URL: http://rpe-feature-toggle-api-chart-probate
      SERVICES_PERSISTENCE_BASEURL : "nothing"
      SERVICES_PDF_SERVICE_URL : http://cmc-pdf-service-chart-probate
      SERVICES_AUTH_PROVIDER_BASEURL : http://rpe-service-auth-provider-chart-probate
      DOCUMENT_MANAGEMENT_URL : http://dm-store-chart-probate
      FEES_REGISTRY_URL: http://fees-chart-probate/fees-register
      IDAM_API_URL: https://idam-api.aat.platform.hmcts.net
      IDAM_URL: https://idam-api.aat.platform.hmcts.net
      IDAM_LOGIN_URL: https://idam-web-public.aat.platform.hmcts.net/login
      IDAM_S2S_URL: http://rpe-service-auth-provider-chart-probate
      S2S_URL: http://rpe-service-auth-provider-chart-probate
      IDAM_S2S_AUTH_URL: http://rpe-service-auth-provider-chart-probate
      PAYMENT_API_URL: http://payment-api-chart-probate
      VALIDATION_SERVICE_URL: http://probate-business-service-chart-probate/validate
      BUSINESS_DOCUMENT_URL: http://probate-business-service-chart-probate/businessDocument
      SUBMIT_SERVICE_URL: http://probate-submit-service-chart-probate
      ORCHESTRATOR_SERVICE_URL : http://probate-orchestrator-service-chart-probate
      PERSISTENCE_SERVICE_URL: "Nothing"
      IDAM_CLIENT_NAME: probate
      IDAM_SERVICE_KEY: AAAAAAAAAAAAAAAA
      IDAM_API_OAUTH2_CLIENT_CLIENT_SECRETS_PROBATE: 123456


#######################################
##### Probate - business Service
#######################################
probate-business-service:
  java:
    ingressHost: ""
    image: hmctspublic.azurecr.io/probate/business-service:latest
    releaseNameOverride: "probate-business-service-chart-probate"
    environment:
      REFORM_TEAM: probate
      REFORM_SERVICE_NAME: business-service
      SERVICES_AUTH_PROVIDER_BASEURL: http://rpe-service-auth-provider-chart-probate
      SERVICES_PDF_SERVICE_URL : http://cmc-pdf-service-chart-probate
      SERVICES_PERSISTENCE_BASEURL: "Nothing"
      SERVICES_NOTIFY_INVITEDATA_INVITELINK : "https://{{ .Values.global.probateFrontend }}/executors/invitation/"
      SERVICES_AUTH_PROVIDER_TOTP_SECRET: AAAAAAAAAAAAAAAA
      # SERVICES_NOTIFY_APIKEY: "${data.azurerm_key_vault_secret.probate_notify_invite_apikey.value}"
      # SERVICES_NOTIFY_INVITEDATA_TEMPLATEID: "${data.azurerm_key_vault_secret.business_services_notify_invitedata_templateId.value}"    
      # SERVICES_NOTIFY_PIN_TEMPLATEID: "${data.azurerm_key_vault_secret.business_services_notify_pin_templateId.value}"
#######################################
##### Probate - Orchestrator Service
#######################################
probate-orchestrator-service:
  java:
    ingressHost: ""
    image: hmctspublic.azurecr.io/probate/orchestrator-service:latest
    releaseNameOverride: "probate-orchestrator-service-chart-probate"
    environment:
      REFORM_TEAM: probate
      REFORM_SERVICE_NAME: orchestrator-service
      PACT_BROKER_URL: test-broker
      PACT_BROKER_PORT: 80
      REFORM_ENVIRONMENT : demo
      DEPLOYMENT_ENV : demo
      SERVICES_PERSISTENCE_BASEURL : "Nothing"
      AUTH_PROVIDER_SERVICE_CLIENT_BASEURL :  http://rpe-service-auth-provider-chart-probate
      SERVICES_CORECASEDATA_BASEURL : "http://chart-probate-data-store-api"
      SERVICES_AUTH_PROVIDER_BASEURL :  http://rpe-service-auth-provider-chart-probate
      AUTH_IDAM_CLIENT_BASEURL : "https://idam-api.demo.platform.hmcts.net"
      SUBMIT_SERVICE_API_URL : http://probate-submit-service-chart-probate
      BUSINESS_SERVICE_API_URL : http://probate-business-service-chart-probate
      BACK_OFFICE_API_URL: http://probate-back-office-chart-probate
      MAIL_JAVAMAILPROPERTIES_MAIL_SMTP_SSL_ENABLE: false
      MAIL_JAVAMAILPROPERTIES_MAIL_SMTP_AUTH: false
      SERVICES_CORECASEDATA_ENABLED: true
      MAIL_JAVAMAILPROPERTIES_SUBJECT: Probate Application
      java_app_name: "orchestrator-service"
      LOG_LEVEL: "INFO"
      IDAM_CLIENT_ID: "probate"
      AUTH_S2S_CLIENT_ID: "probate_backend"
# #######################################
# ##### Probate - Submit Service
# #######################################
probate-submit-service:
  java:
    ingressHost: ""
    image: hmctspublic.azurecr.io/probate/submit-service:latest
    releaseNameOverride: "probate-submit-service-chart-probate"
    environment:
      ingressHost: ""      
      S2S_AUTH_TOTP_SECRET: AAAAAAAAAAAAAAAA
      REFORM_TEAM: probate
      REFORM_SERVICE_NAME: submit-service
      MAIL_JAVAMAILPROPERTIES_MAIL_SMTP_SSL_ENABLE: false
      MAIL_JAVAMAILPROPERTIES_MAIL_SMTP_AUTH: false
      SERVICES_CORECASEDATA_ENABLED: true
      MAIL_JAVAMAILPROPERTIES_SUBJECT: "Probate Application"
      PACT_BROKER_URL: test
      PACT_BROKER_PORT: 80
      LOG_LEVEL : DEBUG
      AUTH_S2S_CLIENT_ID: "probate_backend"
      AUTH_PROVIDER_SERVICE_CLIENT_BASEURL: "http://rpe-service-auth-provider-chart-probate"
      SERVICES_PERSISTENCE_BASEURL: "Not Given"
      SERVICES_CORECASEDATA_BASEURL : http://ccd-data-store
      AUTH_IDAM_CLIENT_BASEURL: https://idam-api.demo.platform.hmcts.net
      SERVICES_CORECASEDATA_ENABLED : true
      SPRING_APPLICATION_JSON : '{"registries":[{"address":"Principal Registry of the Family Division (PRFD)\nHMCTS Probate\nPO Box 12625\nHarlow\nCM20 9QE","name":"ctsc"}]}'
  
#####################################
##### Probate - Back Office
#####################################
probate-back-office:
  java:
    ingressHost: ""
    image: hmctspublic.azurecr.io/probate/back-office:aat-b7287d3d
    releaseNameOverride: "probate-back-office-chart-probate"
    environment:
      AUTH_PROVIDER_SERVICE_CLIENT_KEY: AAAAAAAAAAAAAAAA
      IDAM_CLIENT_NAME: probate
      PROBATE_POSTGRESQL_USER: probate_man
      PROBATE_POSTGRESQL_PASSWORD: hmcts
      PROBATE_POSTGRESQL_DATABASE: hmcts
      PROBATE_POSTGRESQL_HOSTNAME: "chart-probate-postgresql"
      PROBATE_POSTGRESQL_PORT: 5432
      AUTH_PROVIDER_SERVICE_CLIENT_BASEURL: http://rpe-service-auth-provider-chart-probate
      PDF_SERVICE_URL: "http://cmc-pdf-service-chart-probate"
      PRINTSERVICE_HOST: http://ccd-case-print-service
      PRINTSERVICE_INTERNAL_HOST: http://ccd-case-print-service
      CCD_GATEWAY_HOST: https://gateway-{{ .Values.global.ccdIngress }}
      SERVICES_CORECASEDATA_BASEURL : http://ccd-data-store
      IDAM_SERVICE_HOST:  https://idam-api.demo.platform.hmcts.net
      FEE_API_URL: "http://fees-chart-probate"
      EVIDENCE_MANAGEMENT_HOST: "http://dm-store-chart-probate"      
      SEND_LETTER_SERIVCE_BASEURL: "http://rpe-send-letter-service-chart-probate"
      IDAM_REDIRECT_URL: "http://frontend-chart-probate/oauth2/callback"
      IDAM_SECRET: 1234
      LOG_LEVEL: DEBUG
      APPINSIGHTS_INSTRUMENTATIONKEY: 00000000-0000-0000-0000-000000000000
      AUTH_S2S_CLIENT_ID: probate_backend
      PROBATE_POSTGRESQL_USER: hmcts
      PROBATE_POSTGRESQL_PASSWORD: hmcts
      PROBATE_POSTGRESQL_HOSTNAME: chart-probate-postgresql
      PROBATE_POSTGRESQL_DATABASE: probate_man
      PROBATE_POSTGRESQL_PORT: 5432
      
#####################################
##### ccd & elasticsearch &Logstash
#####################################
ccd-elasticsearch:
  logstash:
    elasticsearch:
      host: "{{ .Release.Name }}-ccd-es-client"
  elasticsearch:
    nameOverride: ccd-es
    master:
      persistence:
        enabled: false
    data:
      persistence:
        enabled: false
  ccd:
    idamApiUrl: https://idam-api.demo.platform.hmcts.net
    idamWebUrl: https://idam-web-public.demo.platform.hmcts.net
    s2sUrl: "http://rpe-service-auth-provider-chart-probate"
    draftStoreUrl: "http://draft-store-service-chart-probate"
    paymentsUrl: "http://payment-api-chart-probate"
    ingressHost: '{{ .Values.global.ccdIngress }}'
    releaseNameOverride: "ccd-chart-probate"
    userProfileApi:
      environment: 
        USER_PROFILE_DB_HOST: "chart-probate-postgresql"
        IDAM_S2S_URL: "http://rpe-service-auth-provider-chart-probate"
        USER_PROFILE_S2S_AUTHORISED_SERVICES: AAAAAAAAAAAAAAAA
    idam-pr:
      releaseNameOverride: '{{ .Release.Name }}-idam-pr'
      redirect_uris:
        ccd_gateway:
          - https://case-management-web-{{ .Values.global.ccdIngress }}/oauth2redirect
        ccd_gateway:
          - https://admin-web-{{ .Values.global.ccdIngress }}/oauth2redirect
    definitionStoreApi:
      s2sKey: AAAAAAAAAAAAAAAA
      s2sAuthorisedServices: ccd_admin,ccd_data,ccd_gw
      environment: 
        DEFINITION_STORE_DB_NAME: definition-store
        DEFINITION_STORE_DB_HOST: "chart-probate-postgresql"
        DEFINITION_STORE_DB_USERNAME: hmcts
        DEFINITION_STORE_DB_PASSWORD: hmcts
        DEFINITION_STORE_DB_OPTIONS: "?sslmode=disable"
        ENABLE_DB_MIGRATE: true
    apiGateway:
      s2sKey: AAAAAAAAAAAAAAAA
      idamClientSecret:
        fromSecret: true
        secretKeyRefName: ccd-api-gateway-oauth2-client-secret
        secretKeyRefKey: key
    dataStoreApi:
      s2sKey: AAAAAAAAAAAAAAAA
      image: "hmctspublic.azurecr.io/ccd/data-store-api:latest"
      environment: 
        DATA_STORE_DB_NAME: data-store
        DATA_STORE_DB_HOST: "chart-probate-postgresql"
        DATA_STORE_DB_USERNAME: hmcts
        DATA_STORE_DB_PASSWORD: hmcts
        DATA_STORE_DB_OPTIONS: "?sslmode=disable"
        ENABLE_DB_MIGRATE: true
    caseManagementWeb:
      enabled: true
    # testStubsService:
    #   enabled: true
    adminWeb:
      enabled: true
      s2sKey: AAAAAAAAAAAAAAAA
      idamClientSecret:
        fromSecret: true
        secretKeyRefName: ccd-api-gateway-oauth2-client-secret
        secretKeyRefKey: key
    postgresql:
      enabled: false
    importer:
      userRoles:
        - caseworker-probate
        - caseworker-probate-issuer
        - caseworker-probate-solicitor
        - citizen
        - caseworker-probate-examiner

########################

##### DEPENDENCIES #####
rpe-send-letter-service:
  java:
    ingressHost: ""
    image: hmctspublic.azurecr.io/rpe/send-letter-service:latest
    readinessDelay: 180
    livenessDelay: 180
    readinessPeriod: 60
    livenessPeriod: 60
    releaseNameOverride: "rpe-send-letter-service-chart-probate"
    environment:
      FILE_CLEANUP_ENABLED: true
      LETTER_TRACKING_DB_HOST: "chart-probate-postgresql"
      LETTER_TRACKING_DB_NAME: "send_letter"
      LETTER_TRACKING_DB_USER_NAME: hmcts
      LETTER_TRACKING_DB_PASSWORD: hmcts
      # LETTER_TRACKING_DB_USER_NAME: '{{ .Values.global.postgresqlUsername }}'
      # LETTER_TRACKING_DB_PASSWORD: '{{ .Values.global.postgresqlPassword }}'
      LETTER_TRACKING_DB_CONN_OPTIONS: "?sslmode=disable"
      FLYWAY_URL: "jdbc:postgresql://chart-probate-postgresql:5432/send_letter?sslmode=disable"
      FLYWAY_NOOP_STRATEGY: "false"
      S2S_URL: "http://rpe-service-auth-provider-chart-probate"
      ENCRYPTION_ENABLED: "false"
      APPINSIGHTS_INSTRUMENTATIONKEY: 00000000-0000-0000-0000-000000000000


dm-store:
  java:
    image: hmctspublic.azurecr.io/dm/store:latest
    readinessDelay: 180
    livenessDelay: 180
    readinessPeriod: 60
    livenessPeriod: 60
    secrets:
      STORAGE_ACCOUNT_NAME:
        disabled: true
      STORAGE_ACCOUNT_KEY:
        disabled: true
      STORAGE_CONTAINER_DOCUMENT_CONTAINER_NAME:
        disabled: true
    releaseNameOverride: "dm-store-chart-probate"
    environment:
      ENABLE_DB_MIGRATE: 'true'
      ENABLE_TTL: 'false'
      SPRING_DATASOURCE_USERNAME: hmcts
      SPRING_DATASOURCE_PASSWORD: hmcts
      ENABLE_AZURE_STORAGE_CONTAINER: 'false'
      POSTGRES_STORAGE_ENABLED: 'true'
      STORAGEACCOUNT_PRIMARY_CONNECTION_STRING: 'DefaultEndpointsProtocol=https;AccountName=AAAAAAAAAAAAAAAA;AccountKey=AAAAAAAAAAAAAAAA;EndpointSuffix=core.windows.net'
      CASE_WORKER_ROLES: caseworker-probate
      S2S_NAMES_WHITELIST: ccd_gw,ccd_data,ccd_ps,probate_backend,probate_frontend,bulk_scan_orchestrator,bulk_scan_processor
      SPRING_DATASOURCE_URL: "jdbc:postgresql://chart-probate-postgresql:5432/evidence"
      DM_MULTIPART_WHITELIST: image/jpeg,application/pdf,image/tiff,image/png,image/bmp,text/plain,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.wordprocessingml.template,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.openxmlformats-officedocument.spreadsheetml.template,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,application/vnd.openxmlformats-officedocument.presentationml.template,application/vnd.openxmlformats-officedocument.presentationml.slideshow
      DM_MULTIPART_WHITELIST_EXT: .jpg,.jpeg,.bmp,.tif,.tiff,.png,.pdf,.txt,.doc,.dot,.docx,.dotx,.xls,.xlt,.xla,.xlsx,.xltx,.xlsb,.ppt,.pot,.pps,.ppa,.pptx,.potx,.ppsx
      MAX_FILE_SIZE: 500MB
      MAX_ACTIVE_DB_CONNECTIONS: 10
      ENDPOINTS_HEALTH_SENSITIVE: false
      ENDPOINTS_INFO_SENSITIVE: false
      IDAM_S2S_BASE_URI: "http://rpe-service-auth-provider-chart-probate"

cmc-pdf-service:
  java:
    ingressHost: ""
    image: hmctspublic.azurecr.io/cmc/pdf-service:latest
    readinessDelay: 180
    livenessDelay: 180
    readinessPeriod: 60
    livenessPeriod: 60
    releaseNameOverride: "cmc-pdf-service-chart-probate"

draft-store-service:
  java:
    ingressHost: ""
    image: hmctspublic.azurecr.io/draft-store/service:latest
    readinessDelay: 180
    livenessDelay: 180
    readinessPeriod: 60
    livenessPeriod: 60
    releaseNameOverride: "draft-store-service-chart-probate"
    environment:
      DRAFT_STORE_DB_HOST: "chart-probate-postgresql"
      DRAFT_STORE_DB_NAME: draftstore
      DRAFT_STORE_DB_USER_NAME: hmcts
      DRAFT_STORE_DB_PASSWORD: hmcts
      RUN_DB_MIGRATION_ON_STARTUP: true
      DRAFT_STORE_DB_CONN_OPTIONS: "?sslmode=disable"

fees-register-api:
  java:
    ingressHost: ""
    image: hmctspublic.azurecr.io/fees-register/api:latest
    readinessDelay: 180
    livenessDelay: 180
    readinessPeriod: 45
    livenessPeriod: 45
    releaseNameOverride: "fees-chart-probate"
    environment:
      POSTGRES_CONNECTION_OPTIONS:  "?sslmode=disable"
      POSTGRES_HOST: "chart-probate-postgresql"
      POSTGRES_NAME: "fees_register"
      SPRING_DATASOURCE_URL: "jdbc:postgresql://chart-probate-postgresql:5432/fees_register"
      SPRING_DATASOURCE_USERNAME: hmcts
      SPRING_DATASOURCE_PASSWORD: hmcts
      SPRING_LIQUIBASE_ENABLED: true
      IDAM_CLIENT_BASE_URL: "https://idam-api.demo.platform.hmcts.net"
      ENABLE_FEE_LOADER: true

payment-api:
  java:
    ingressHost: ""
    image: hmctspublic.azurecr.io/payment/api:latest
    readinessDelay: 180
    livenessDelay: 180
    readinessPeriod: 60
    livenessPeriod: 60
    releaseNameOverride: "payment-api-chart-probate"
    environment:
      PAYMENT_AUDIT_FILE: /tmp/payment-audit.log
      ASB_CONNECTION_STRING: false
      AUTH_IDAM_CLIENT_BASEURL: https://idam-api.demo.platform.hmcts.net
      AUTH_PROVIDER_SERVICE_CLIENT_BASEURL: http://rpe-service-auth-provider-chart-probate
      CORE_CASE_DATA_API_URL: http://chart-probate-data-store-api
      FEES_REGISTER_URL: http://fees-chart-probate
      SPRING_DATASOURCE_USERNAME: hmcts
      SPRING_DATASOURCE_PASSWORD: hmcts
      SPRING_LIQUIBASE_ENABLED: true
      SPRING_DATASOURCE_URL: "jdbc:postgresql://chart-probate-postgresql:5432/payment_api"
      PAYBUBBLE_HOME_URL: "https://ccpay-bubble.demo.platform.hmcts.net"
      
rpe-service-auth-provider:
  java:
    ingressHost: ""
    image: hmctspublic.azurecr.io/rpe/service-auth-provider:latest
    readinessDelay: 180
    livenessDelay: 180
    readinessPeriod: 60
    livenessPeriod: 60
    releaseNameOverride: "rpe-service-auth-provider-chart-probate"
    environment:
      TESTING_SUPPORT_ENABLED: 'true'
      MICROSERVICEKEYS_EM_GW: AAAAAAAAAAAAAAAA
      MICROSERVICEKEYS_CCD_DATA: AAAAAAAAAAAAAAAA
      MICROSERVICEKEYS_CCD_DEFINITION: AAAAAAAAAAAAAAAA
      MICROSERVICEKEYS_CCD_GATEWAY: AAAAAAAAAAAAAAAA
      MICROSERVICEKEYS_CCD_GW: AAAAAAAAAAAAAAAA
      MICROSERVICEKEYS_DG_DOCASSEMBLY_API: AAAAAAAAAAAAAAAA
      MICROSERVICEKEYS_PROBATE_BACKEND: AAAAAAAAAAAAAAAA
      MICROSERVICEKEYS_PROBATE_FRONTEND: AAAAAAAAAAAAAAAA

rpe-feature-toggle-api:
  java:
    ingressHost: ""
    image: hmctspublic.azurecr.io/rpe/feature-toggle-api:latest
    readinessDelay: 180
    livenessDelay: 180
    readinessPeriod: 60
    livenessPeriod: 60
    releaseNameOverride: "rpe-feature-toggle-api-chart-probate"
    environment:
      EDITOR_USERNAME_TEST: editor@example.com
      EDITOR_PASSWORD_TEST: Password12
    importer:
      cron:
        enabled: false
      oneoff:
        enabled: false
    postgresql:
      postgresqlDatabase: "features"
    
postgresql:
  # postgresqlConfiguration: { "maxConnections": 300 }
  resources:
    requests:
      cpu: 25m
  initdbScripts:
    init.sql: |-
      CREATE DATABASE "draftstore" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
      CREATE DATABASE "fees_register" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
      CREATE DATABASE "payment_api" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
      CREATE DATABASE "send_letter" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
      CREATE DATABASE "data-store" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
      CREATE DATABASE "definition-store" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
      CREATE DATABASE "evidence" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
      CREATE DATABASE "probate" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
      CREATE DATABASE "probate_man" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
      CREATE DATABASE "features" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
  # postgresqlUsername: '{{ .Values.global.postgresqlUsername }}'
  # postgresqlPassword: '{{ .Values.global.postgresqlPassword }}'
  postgresqlUsername: hmcts
  postgresqlPassword: hmcts
  postgresqlDatabase: user-profile
  persistence:
    enabled: false

########################
global:
    devMode: true
    postgresqlUsername: hmcts
    postgresqlPassword: hmcts
    bsoIdamRedirectUrl: "https://bulk-scan-orchestrator/oauth2/callback"
    ccdIngress: ""
    probateFrontend: ""
